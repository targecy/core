generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Issuer {
  did         String       @id
  name        String       @db.VarChar(255)
  profileNonce    Int
  createdAt   DateTime     @default(now())
  updatedAt   DateTime     @updatedAt
  credentials Credential[]
  apiKeys     ApiKey[]
}

model ApiKey {
  key           String   @id @db.VarChar(255)
  expirationDate DateTime
  createdAt     DateTime @default(now())
  updatedAt     DateTime @updatedAt
  issuerDid  String
  issuer        Issuer   @relation(fields: [issuerDid], references: [did])
}

model Credential {
  did       String   @id 
  type      String   @db.VarChar(255)
  subject   Json 

  issuedTo  String   @db.VarChar(255)
  issuedAt  DateTime @default(now())
  
  issuerDid  String
  issuer    Issuer   @relation(fields: [issuerDid], references: [did])
}
